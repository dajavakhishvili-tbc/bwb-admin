import{d as ee,e as te,g as ne,h as ie,i as re,k as L}from"./chunk-AH6FBAQG.js";import{b as K,i as Z}from"./chunk-YVGC6QTE.js";import{j as X}from"./chunk-HYPGHTY2.js";import{Ca as z,Da as G,Db as F,Fa as c,Fb as a,Gb as E,Hb as O,Ib as Q,Pa as D,Pb as k,Qb as V,T as I,Xb as M,Y as f,Yb as w,Z as m,a as x,b as y,fb as _,ga as g,gb as b,ia as $,ib as W,jb as Y,kb as h,lb as o,mb as d,nb as J,ob as u,pb as v,qb as N,rb as C,sb as U,vb as p,wb as S,xb as s}from"./chunk-BPFOLRV5.js";function de(r,t){if(r&1){let e=C();u(0,"button",15),S("click",function(){f(e);let n=s();return m(n.onShowStats())}),u(1,"span",16),a(2,"\u{1F4CA}"),v()()}}function se(r,t){if(r&1&&(a(0),k(1,"date"),k(2,"date")),r&2){let e=s(2);Q(" ",V(1,2,e.offer().startDate,"MMM d")," - ",V(2,5,e.offer().endDate,"MMM d, y")," ")}}function le(r,t){if(r&1&&(a(0),k(1,"date")),r&2){let e=s(2);O(" From ",V(1,1,e.offer().startDate,"MMM d, y")," ")}}function ce(r,t){if(r&1&&(a(0),k(1,"date")),r&2){let e=s(2);O(" Until ",V(1,1,e.offer().endDate,"MMM d, y")," ")}}function fe(r,t){if(r&1&&(u(0,"div",4)(1,"span",17),_(2,se,3,8)(3,le,2,4)(4,ce,2,4),v()()),r&2){let e=s();c(2),b(e.offer().startDate&&e.offer().endDate?2:e.offer().startDate?3:e.offer().endDate?4:-1)}}var A=class r{offer=w.required();edit=M();delete=M();showStats=M();isStatsOpen=g(!1);onEdit(){this.edit.emit(this.offer())}onDelete(){this.delete.emit(this.offer().id)}onShowStats(){this.showStats.emit(this.offer())}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["ib-offer-card"]],inputs:{offer:[1,"offer"]},outputs:{edit:"edit",delete:"delete",showStats:"showStats"},decls:23,vars:11,consts:[[1,"offer-card"],[1,"card-image"],[1,"image",3,"src","alt"],["title","View statistics",1,"stats-btn"],[1,"date-range-badge"],[1,"image-overlay"],["title","Edit offer",1,"edit-btn",3,"click"],[1,"btn-icon"],["title","Delete offer",1,"delete-btn",3,"click"],[1,"card-content"],[1,"card-title"],[1,"card-description"],[1,"card-footer"],[1,"card-date"],[1,"card-author"],["title","View statistics",1,"stats-btn",3,"click"],[1,"stats-icon"],[1,"date-range-text"]],template:function(e,i){e&1&&(u(0,"div",0)(1,"div",1),N(2,"img",2),_(3,de,3,0,"button",3),_(4,fe,5,1,"div",4),u(5,"div",5)(6,"button",6),S("click",function(){return i.onEdit()}),u(7,"span",7),a(8,"\u270F\uFE0F"),v()(),u(9,"button",8),S("click",function(){return i.onDelete()}),u(10,"span",7),a(11,"\u{1F5D1}\uFE0F"),v()()()(),u(12,"div",9)(13,"h3",10),a(14),v(),u(15,"p",11),a(16),v(),u(17,"div",12)(18,"span",13),a(19),k(20,"date"),v(),u(21,"span",14),a(22),v()()()()),e&2&&(c(2),U("src",i.offer().imageUrl,z)("alt",i.offer().title),c(),b(i.offer().statsIframe?3:-1),c(),b(i.offer().startDate||i.offer().endDate?4:-1),c(10),E(i.offer().title),c(2),E(i.offer().description),c(3),O("Created: ",V(20,8,i.offer().createdAt,"MMM d, y")),c(3),E(i.offer().author))},dependencies:[X],styles:[".offer-card[_ngcontent-%COMP%]{--card-bg: var(--card-bg);--text-tertiary: var(--text-muted);--image-bg: var(--bg-primary);border-radius:21.6px;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;overflow:hidden;transition:all .3s ease;border:1px solid var(--card-border, #E1E4E5);height:310px;display:flex;flex-direction:column}.offer-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 10px 25px -3px #0000001a,0 4px 6px -2px #0000000d}.card-image[_ngcontent-%COMP%]{position:relative;height:150px;overflow:hidden;background:var(--image-bg, #f3f4f6);flex-shrink:0}.card-image[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.card-image[_ngcontent-%COMP%]   .stats-btn[_ngcontent-%COMP%]{position:absolute;top:.75rem;left:.75rem;background:#dddddd45;border:none;border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;z-index:2;box-shadow:0 2px 8px #00000026}.card-image[_ngcontent-%COMP%]   .stats-btn[_ngcontent-%COMP%]:hover{background:#fff;transform:scale(1.1);box-shadow:0 4px 12px #0003}.card-image[_ngcontent-%COMP%]   .stats-btn[_ngcontent-%COMP%]   .stats-icon[_ngcontent-%COMP%]{font-size:1rem}.card-image[_ngcontent-%COMP%]   .date-range-badge[_ngcontent-%COMP%]{position:absolute;top:.75rem;right:.75rem;background:#000c;color:#fff;padding:.25rem .5rem;border-radius:.375rem;font-size:.75rem;font-weight:500;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:2}.card-image[_ngcontent-%COMP%]   .date-range-badge[_ngcontent-%COMP%]   .date-range-text[_ngcontent-%COMP%]{white-space:nowrap}.card-image[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;gap:.5rem;opacity:0;transition:opacity .3s ease}.card-image[_ngcontent-%COMP%]:hover   .image[_ngcontent-%COMP%]{transform:scale(1.05)}.card-image[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.edit-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]{background:#ffffffe6;border:none;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease}.edit-btn[_ngcontent-%COMP%]:hover, .delete-btn[_ngcontent-%COMP%]:hover{background:#fff;transform:scale(1.1)}.edit-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{font-size:1rem}.delete-btn[_ngcontent-%COMP%]:hover{background:#fee2e2;color:#dc2626}.card-content[_ngcontent-%COMP%]{padding:1.5rem;flex:1;display:flex;flex-direction:column}.card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0 0 .75rem;line-height:1.4;display:-webkit-box;-webkit-line-clamp:1;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.card-description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5;margin:0 0 1rem;display:-webkit-box;-webkit-line-clamp:1;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;flex:1}.card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:.75rem;border-top:1px solid var(--border-color, #e5e7eb);flex-shrink:0}.card-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-tertiary, #9ca3af);font-weight:500}.card-author[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary, #6b7280);font-weight:500;background:var(--bg-secondary, #f3f4f6);padding:.25rem .5rem;border-radius:.375rem;border:1px solid var(--border-color, #e5e7eb)}[data-theme=dark][_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]{--card-bg: var(--card-bg);--text-tertiary: var(--text-muted);--image-bg: var(--bg-primary)}"],changeDetection:0})};function me(r,t){if(r&1&&(o(0,"div",28)(1,"span",40),a(2),d()()),r&2){let e=s(2);c(2),E(e.dateValidationError())}}function pe(r,t){if(r&1){let e=C();o(0,"div",33)(1,"input",41),p("change",function(n){f(e);let l=s(2);return m(l.onFileSelected(n))}),d(),o(2,"div",42)(3,"span",43),a(4,"\u{1F4C1}"),d(),o(5,"span",44),a(6,"Click to upload image"),d(),o(7,"span",45),a(8,"or drag and drop"),d()()()}}function ge(r,t){if(r&1){let e=C();o(0,"div",34),J(1,"img",46),o(2,"button",47),p("click",function(){f(e);let n=s(2);return m(n.removeSelectedFile())}),o(3,"span",48),a(4,"\u2715"),d()()()}if(r&2){let e=s(2);c(),h("src",e.imagePreview(),z)}}function ue(r,t){if(r&1){let e=C();o(0,"div",1),p("click",function(){f(e);let n=s();return m(n.onClose())}),o(1,"div",2),p("click",function(n){return f(e),m(n.stopPropagation())}),o(2,"div",3)(3,"h2",4),a(4),d(),o(5,"button",5),p("click",function(){f(e);let n=s();return m(n.onClose())}),o(6,"span",6),a(7,"\u2715"),d()()(),o(8,"div",7)(9,"form",8),p("ngSubmit",function(){f(e);let n=s();return m(n.onSave())}),o(10,"div",9)(11,"label",10),a(12,"Title *"),d(),o(13,"input",11),p("input",function(n){f(e);let l=s();return m(l.onTitleChange(n))}),d()(),o(14,"div",9)(15,"label",12),a(16,"Description *"),d(),o(17,"textarea",13),p("input",function(n){f(e);let l=s();return m(l.onDescriptionChange(n))}),d()(),o(18,"div",9)(19,"label",14),a(20,"Type *"),d(),o(21,"select",15),p("change",function(n){f(e);let l=s();return m(l.onTypeChange(n))}),o(22,"option",16),a(23,"Dashboard"),d(),o(24,"option",17),a(25,"Offers"),d(),o(26,"option",18),a(27,"What's New"),d()(),o(28,"div",19)(29,"span",20),a(30,"Select the section where this content will appear"),d()()(),o(31,"div",9)(32,"label",21),a(33,"Date Range (Optional)"),d(),o(34,"div",22)(35,"div",23)(36,"label",24),a(37,"Start Date"),d(),o(38,"input",25),p("change",function(n){f(e);let l=s();return m(l.onStartDateChange(n))}),d()(),o(39,"div",23)(40,"label",26),a(41,"End Date"),d(),o(42,"input",27),p("change",function(n){f(e);let l=s();return m(l.onEndDateChange(n))}),d()()(),_(43,me,3,1,"div",28),o(44,"div",19)(45,"span",20),a(46,"Select the date range when this offer will be active"),d()()(),o(47,"div",9)(48,"label",29),a(49,"Statistics Iframe URL (Optional)"),d(),o(50,"input",30),p("input",function(n){f(e);let l=s();return m(l.onStatsIframeChange(n))}),d(),o(51,"div",19)(52,"span",20),a(53,"Paste the iframe URL to enable statistics tracking for this offer"),d()()(),o(54,"div",9)(55,"label",31),a(56,"Image Upload *"),d(),o(57,"div",32),_(58,pe,9,0,"div",33)(59,ge,5,1,"div",34),d(),o(60,"div",35)(61,"span",36),a(62,"Supported: JPG, PNG, GIF (max 5MB)"),d()()(),o(63,"div",37)(64,"button",38),p("click",function(){f(e);let n=s();return m(n.onClose())}),a(65," Cancel "),d(),o(66,"button",39),a(67),d()()()()()()}if(r&2){let e=s();c(4),E(e.getDialogTitle()),c(9),h("value",e.form().title),c(4),h("value",e.form().description),c(4),h("value",e.form().type),c(17),h("value",e.getDateValue(e.form().startDate)),c(4),h("value",e.getDateValue(e.form().endDate)),c(),b(e.dateValidationError()?43:-1),c(7),h("value",e.form().statsIframe||""),c(8),b(!e.selectedFile()&&!e.imagePreview()?58:59),c(8),h("disabled",!e.isFormValid()),c(),O(" ",e.getSaveButtonText()," ")}}var j=class r{isOpen=w(!1);dialogType=w("add");dialogForm=w({title:"",description:"",imageUrl:"",statsIframe:"",type:"dashboard"});close=M();save=M();form=g({title:"",description:"",imageUrl:"",statsIframe:"",type:"dashboard"});isFormValid=g(!1);selectedFile=g(null);imagePreview=g("");dateValidationError=g("");constructor(){this.updateFormValidation()}ngOnChanges(){if(this.isOpen()){let t=this.dialogForm();this.form.set(x({},t)),this.selectedFile.set(null),this.imagePreview.set(t.imageUrl||""),this.validateDates(),this.updateFormValidation()}}onFormChange(){this.updateFormValidation()}updateFormValidation(){let t=this.form(),e=t.title.trim().length>0&&t.description.trim().length>0&&(t.imageUrl.trim().length>0||this.selectedFile()!==null)&&this.dateValidationError().length===0;this.isFormValid.set(e)}onClose(){this.close.emit()}onSave(){if(this.isFormValid()){let t=x({},this.form());if(this.selectedFile()){let e=this.selectedFile(),i=new FileReader;i.onload=n=>{t.imageUrl=n.target?.result,this.save.emit(t)},i.readAsDataURL(e)}else this.save.emit(t)}}onFileSelected(t){let i=t.target.files?.[0];if(i){if(!i.type.startsWith("image/")){alert("Please select an image file.");return}if(i.size>5*1024*1024){alert("File size must be less than 5MB.");return}this.selectedFile.set(i);let n=new FileReader;n.onload=l=>{this.imagePreview.set(l.target?.result)},n.readAsDataURL(i),this.updateFormValidation()}}onTitleChange(t){let e=t.target;this.form.set(y(x({},this.form()),{title:e.value})),this.updateFormValidation()}onDescriptionChange(t){let e=t.target;this.form.set(y(x({},this.form()),{description:e.value})),this.updateFormValidation()}onStatsIframeChange(t){let e=t.target;this.form.set(y(x({},this.form()),{statsIframe:e.value})),this.updateFormValidation()}onTypeChange(t){let e=t.target;this.form.set(y(x({},this.form()),{type:e.value})),this.updateFormValidation()}onStartDateChange(t){let e=t.target,i=e.value?new Date(e.value):void 0;this.form.set(y(x({},this.form()),{startDate:i})),this.validateDates(),this.updateFormValidation()}onEndDateChange(t){let e=t.target,i=e.value?new Date(e.value):void 0;this.form.set(y(x({},this.form()),{endDate:i})),this.validateDates(),this.updateFormValidation()}validateDates(){let{startDate:t,endDate:e}=this.form();t&&e&&t>e?this.dateValidationError.set("Start date cannot be newer than end date"):this.dateValidationError.set("")}getDateValue(t){return t?t.toISOString().split("T")[0]:""}removeSelectedFile(){this.selectedFile.set(null),this.imagePreview.set(""),this.updateFormValidation()}getDialogTitle(){return this.dialogType()==="add"?"Add New Offer":"Edit Offer"}getSaveButtonText(){return this.dialogType()==="add"?"Create Offer":"Update Offer"}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["ib-offer-dialog"]],inputs:{isOpen:[1,"isOpen"],dialogType:[1,"dialogType"],dialogForm:[1,"dialogForm"]},outputs:{close:"close",save:"save"},features:[$],decls:1,vars:1,consts:[[1,"dialog-overlay"],[1,"dialog-overlay",3,"click"],[1,"dialog-content",3,"click"],[1,"dialog-header"],[1,"dialog-title"],["title","Close dialog",1,"close-btn",3,"click"],[1,"close-icon"],[1,"dialog-body"],[1,"offer-form",3,"ngSubmit"],[1,"form-group"],["for","title",1,"form-label"],["type","text","id","title","name","title","placeholder","Enter offer title","required","",1,"form-input",3,"input","value"],["for","description",1,"form-label"],["id","description","name","description","placeholder","Enter offer description","rows","4","required","",1,"form-textarea",3,"input","value"],["for","type",1,"form-label"],["id","type","name","type","required","",1,"form-select",3,"change","value"],["value","dashboard"],["value","offers"],["value","whats-new"],[1,"field-help"],[1,"help-text"],[1,"form-label"],[1,"date-range-container"],[1,"date-input-group"],["for","startDate",1,"date-label"],["type","date","id","startDate","name","startDate",1,"form-input","date-input",3,"change","value"],["for","endDate",1,"date-label"],["type","date","id","endDate","name","endDate",1,"form-input","date-input",3,"change","value"],[1,"field-error"],["for","statsIframe",1,"form-label"],["type","url","id","statsIframe","name","statsIframe","placeholder","Enter iframe URL for statistics dashboard",1,"form-input",3,"input","value"],["for","imageFile",1,"form-label"],[1,"file-upload-container"],[1,"file-upload-area"],[1,"image-preview-container"],[1,"upload-info"],[1,"file-types"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-text"],["type","file","id","imageFile","name","imageFile","accept","image/*","required","",1,"file-input",3,"change"],[1,"upload-placeholder"],[1,"upload-icon"],[1,"upload-text"],[1,"upload-hint"],["alt","Preview",1,"preview-image",3,"src"],["type","button",1,"remove-image-btn",3,"click"],[1,"remove-icon"]],template:function(e,i){e&1&&_(0,ue,68,11,"div",0),e&2&&b(i.isOpen()?0:-1)},dependencies:[L,ne,ie,re,ee,te],styles:[".dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem}.dialog-content[_ngcontent-%COMP%]{--dialog-bg: var(--bg-primary);--text-secondary: var(--text-secondary);--text-tertiary: var(--text-muted);--border-color: var(--border-color);--input-border: var(--input-border);--hover-bg: var(--bg-quaternary);--secondary-bg: var(--bg-secondary);--secondary-hover: var(--bg-tertiary);--primary-color: var(--button-primary);--primary-hover: var(--button-hover);--upload-bg: var(--bg-quaternary);--upload-hover-bg: var(--bg-tertiary);background:var(--dialog-bg);border-radius:.75rem;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;animation:_ngcontent-%COMP%_dialogSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_dialogSlideIn{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 1.5rem 1rem;border-bottom:1px solid var(--border-color, #e5e7eb)}.dialog-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary, #111827);margin:0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:var(--text-secondary, #6b7280);cursor:pointer;padding:.5rem;border-radius:.375rem;transition:all .2s ease}.close-btn[_ngcontent-%COMP%]:hover{background:var(--hover-bg, #f3f4f6);color:var(--text-primary, #111827)}.dialog-body[_ngcontent-%COMP%]{padding:1.5rem}.offer-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary, #111827);font-size:.875rem}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{padding:.75rem;border:1px solid var(--input-border, #d1d5db);border-radius:.5rem;font-size:.875rem;transition:all .2s ease;background:var(--input-bg);color:var(--text-primary, #111827)}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color, #00adee);box-shadow:0 0 0 3px #3b82f61a}.form-input[_ngcontent-%COMP%]::placeholder, .form-textarea[_ngcontent-%COMP%]::placeholder, .form-select[_ngcontent-%COMP%]::placeholder{color:var(--text-tertiary, #cbd5e1)}.date-range-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:.5rem}.date-input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.date-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--text-secondary, #6b7280)}.date-input[_ngcontent-%COMP%]{width:100%}.field-error[_ngcontent-%COMP%]{margin-top:.25rem;margin-bottom:.5rem}.error-text[_ngcontent-%COMP%]{font-size:.875rem;color:#dc2626;font-weight:500}.form-select[_ngcontent-%COMP%]{cursor:pointer}.form-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background:var(--input-bg);color:var(--text-primary, #111827)}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.file-upload-container[_ngcontent-%COMP%]{margin-top:.5rem}.file-upload-area[_ngcontent-%COMP%]{position:relative;border:2px dashed var(--input-border, #d1d5db);border-radius:.5rem;padding:2rem;text-align:center;background:var(--bg-quaternary);transition:all .2s ease;cursor:pointer}.file-upload-area[_ngcontent-%COMP%]:hover{border-color:var(--primary-color, #00adee);background:var(--upload-hover-bg, #f0f9ff)}.file-upload-area[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.file-upload-area[_ngcontent-%COMP%]   .upload-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem;pointer-events:none}.file-upload-area[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:2rem;color:var(--text-secondary, #6b7280)}.file-upload-area[_ngcontent-%COMP%]   .upload-text[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary, #111827)}.file-upload-area[_ngcontent-%COMP%]   .upload-hint[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary, #6b7280)}.image-preview-container[_ngcontent-%COMP%]{position:relative;border-radius:.5rem;overflow:hidden;border:1px solid var(--border-color, #e5e7eb);background:var(--bg-quaternary)}.image-preview-container[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{width:100%;height:150px;object-fit:cover;display:block}.image-preview-container[_ngcontent-%COMP%]   .remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:.5rem;background:#000000b3;color:#fff;border:none;border-radius:50%;width:30px;height:30px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease}.image-preview-container[_ngcontent-%COMP%]   .remove-image-btn[_ngcontent-%COMP%]:hover{background:#000000e6;transform:scale(1.1)}.image-preview-container[_ngcontent-%COMP%]   .remove-image-btn[_ngcontent-%COMP%]   .remove-icon[_ngcontent-%COMP%]{font-size:.875rem}.upload-info[_ngcontent-%COMP%]{margin-top:.5rem}.upload-info[_ngcontent-%COMP%]   .file-types[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-tertiary, #9ca3af)}.field-help[_ngcontent-%COMP%]{margin-top:.5rem}.field-help[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-tertiary, #9ca3af);font-style:italic}.form-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;justify-content:flex-end;padding-top:.5rem;border-top:1px solid var(--border-color, #e5e7eb)}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:.5rem;font-weight:500;cursor:pointer;transition:all .2s ease;font-size:.875rem}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:var(--secondary-bg, #f3f4f6);color:var(--text-primary, #111827)}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--secondary-hover, #e5e7eb)}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color, #00adee);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-hover, #8dcbf8)}[data-theme=dark][_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{--dialog-bg: var(--bg-primary);--text-secondary: var(--text-secondary);--text-tertiary: var(--text-muted);--border-color: var(--border-color);--input-border: var(--input-border);--hover-bg: var(--bg-tertiary);--secondary-bg: var(--bg-secondary);--secondary-hover: var(--bg-tertiary);--primary-color: var(--button-primary);--primary-hover: var(--button-hover);--upload-bg: var(--bg-quaternary);--upload-hover-bg: var(--bg-tertiary)}@media (max-width: 640px){.dialog-overlay[_ngcontent-%COMP%]{padding:.5rem}.dialog-content[_ngcontent-%COMP%]{max-width:100%;margin:0}.dialog-header[_ngcontent-%COMP%]{padding:1rem 1rem 0}.dialog-body[_ngcontent-%COMP%]{padding:1rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%}}"],changeDetection:0})};function _e(r,t){if(r&1&&N(0,"iframe",3),r&2){let e=s(2);U("src",e.getSafeIframeUrl(),G)}}function be(r,t){r&1&&(u(0,"div",4)(1,"div",5),a(2,"\u{1F4CA}"),v(),u(3,"h4",6),a(4,"No Statistics Available"),v(),u(5,"p",7),a(6,"This offer doesn't have statistics tracking configured."),v()())}function ve(r,t){if(r&1){let e=C();u(0,"div",1),S("click",function(){f(e);let n=s();return m(n.closeSidebar())}),u(1,"div",2),S("click",function(n){return f(e),m(n.stopPropagation())}),_(2,_e,1,1,"iframe",3)(3,be,7,0,"div",4),v()()}if(r&2){let e=s();c(2),b(e.offer().statsIframe?2:3)}}var q=class r{offer=w.required();isOpen=w(g(!1));close=M();sanitizer=I(K);getSafeIframeUrl(){let t=this.offer();return t?.statsIframe?this.sanitizer.bypassSecurityTrustResourceUrl(t.statsIframe):null}closeSidebar(){this.close.emit()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["ib-offer-stats-sidebar"]],inputs:{offer:[1,"offer"],isOpen:[1,"isOpen"]},outputs:{close:"close"},decls:1,vars:1,consts:[[1,"stats-overlay"],[1,"stats-overlay",3,"click"],[1,"stats-sidebar",3,"click"],["frameborder","0","width","600px","height","100%","allowfullscreen","",3,"src"],[1,"no-stats"],[1,"no-stats-icon"],[1,"no-stats-title"],[1,"no-stats-description"]],template:function(e,i){e&1&&_(0,ve,4,1,"div",0),e&2&&b(i.isOpen()()?0:-1)},styles:[".stats-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:1000;display:flex;justify-content:flex-end;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.stats-sidebar[_ngcontent-%COMP%]{--card-bg: var(--card-bg);--bg-primary: var(--bg-primary);--bg-secondary: var(--bg-secondary);--text-primary: var(--text-primary);--text-secondary: var(--text-secondary);--text-tertiary: var(--text-muted);--border-color: var(--border-color);height:100vh;background:var(--card-bg);box-shadow:-4px 0 20px #00000026;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideInRight .3s ease-out;overflow:hidden}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideInRight{0%{transform:translate(100%)}to{transform:translate(0)}}.sidebar-content[_ngcontent-%COMP%]{flex:1;padding:1.5rem;overflow-y:auto}.iframe-container[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 60px);border-radius:.5rem;overflow:hidden;border:1px solid var(--border-color, #e5e7eb)}.no-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:300px;text-align:center;padding:2rem;background:var(--bg-secondary, #f8f9fa);border-radius:.75rem;border:1px solid var(--border-color, #e5e7eb)}.no-stats-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;opacity:.5}.no-stats-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--text-primary, #111827);margin:0 0 .5rem}.no-stats-description[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary, #6b7280);margin:0;max-width:300px}[data-theme=dark][_ngcontent-%COMP%]   .stats-sidebar[_ngcontent-%COMP%]{--card-bg: var(--card-bg);--bg-primary: var(--bg-primary);--bg-secondary: var(--bg-secondary);--text-primary: var(--text-primary);--text-secondary: var(--text-secondary);--text-tertiary: var(--text-muted);--border-color: var(--border-color)}"],changeDetection:0})};var he=(r,t)=>t.id;function Ce(r,t){if(r&1){let e=C();o(0,"div",9)(1,"div",13),a(2,"\u{1F381}"),d(),o(3,"h3",14),a(4),d(),o(5,"p",15),a(6),d(),o(7,"button",16),p("click",function(){f(e);let n=s();return m(n.openAddDialog())}),a(8),d()()}if(r&2){let e=s();c(4),O("No ",e.activeTab()==="dashboard"?"dashboard":e.activeTab()==="offers"?"offers":"what's new"," content yet"),c(2),O("Create your first ",e.activeTab()==="dashboard"?"dashboard":e.activeTab()==="offers"?"offer":"what's new"," content to get started"),c(2),O(" Create First ",e.activeTab()==="dashboard"?"Dashboard":e.activeTab()==="offers"?"Offer":"What's New"," Content ")}}function xe(r,t){if(r&1){let e=C();o(0,"div",18),p("dragstart",function(n){let l=f(e).$implicit,T=s(2);return m(T.onDragStart(n,l))})("dragover",function(n){f(e);let l=s(2);return m(l.onDragOver(n))})("dragenter",function(n){f(e);let l=s(2);return m(l.onDragEnter(n))})("dragleave",function(n){f(e);let l=s(2);return m(l.onDragLeave(n))})("drop",function(n){let l=f(e).$implicit,T=s(2);return m(T.onDrop(n,l))})("dragend",function(n){f(e);let l=s(2);return m(l.onDragEnd(n))}),o(1,"ib-offer-card",19),p("edit",function(){let n=f(e).$implicit,l=s(2);return m(l.openEditDialog(n))})("delete",function(){let n=f(e).$implicit,l=s(2);return m(l.deleteOffer(n.id))})("showStats",function(n){f(e);let l=s(2);return m(l.showOfferStats(n))}),d()()}if(r&2){let e,i=t.$implicit,n=s(2);F("dragging",((e=n.draggedOffer())==null?null:e.id)===i.id),c(),h("offer",i)}}function Oe(r,t){if(r&1&&(o(0,"div",10),W(1,xe,2,3,"div",17,he),d()),r&2){let e=s();c(),Y(e.filteredOffers())}}function ye(r,t){if(r&1){let e=C();o(0,"ib-offer-dialog",20),p("close",function(){f(e);let n=s();return m(n.closeDialog())})("save",function(n){f(e);let l=s();return m(l.saveOffer(n))}),d()}if(r&2){let e=s();h("isOpen",e.isDialogOpen())("dialogType",e.dialogType())("dialogForm",e.dialogForm())}}function Me(r,t){if(r&1){let e=C();o(0,"ib-offer-stats-sidebar",21),p("close",function(){f(e);let n=s();return m(n.closeStatsSidebar())}),d()}if(r&2){let e=s();h("offer",e.selectedOfferForStats())("isOpen",e.isStatsSidebarOpen)}}var oe=class r{offers=g([]);isDialogOpen=g(!1);dialogForm=g({title:"",description:"",imageUrl:"",statsIframe:"",type:"dashboard"});dialogType=g("add");editingOfferId=g(null);draggedOffer=g(null);isStatsSidebarOpen=g(!1);selectedOfferForStats=g(null);activeTab=g("dashboard");authService=I(Z);constructor(){this.offers.set([{id:1,title:"Special Discount",description:"Get 20% off on all products this week!",imageUrl:"https://picsum.photos/300/200?random=1",createdAt:new Date("2024-01-15"),startDate:new Date("2024-01-15"),endDate:new Date("2024-01-22"),author:"admin",statsIframe:"https://eu.posthog.com/shared/OvTht1LV7gDaz-Ca5X4UFimMF1qsfQ",type:"dashboard"},{id:2,title:"Free Shipping",description:"Free shipping on orders over $50",imageUrl:"https://picsum.photos/300/200?random=2",createdAt:new Date("2024-01-14"),author:"admin",type:"offers"},{id:3,title:"Limited Time Deal",description:"Flash sale! 50% off selected items for the next 24 hours only.",imageUrl:"https://picsum.photos/300/200?random=3",createdAt:new Date("2024-01-13"),startDate:new Date("2024-01-13"),endDate:new Date("2024-01-14"),author:"admin",type:"offers"},{id:4,title:"Buy One Get One",description:"Buy any item and get a second one absolutely free!",imageUrl:"https://picsum.photos/300/200?random=4",createdAt:new Date("2024-01-12"),author:"admin",type:"offers"},{id:5,title:"Student Discount",description:"Students get 15% off with valid student ID. Valid on all purchases.",imageUrl:"https://picsum.photos/300/200?random=5",createdAt:new Date("2024-01-11"),author:"admin",type:"whats-new"},{id:6,title:"Loyalty Rewards",description:"Earn points on every purchase and redeem for exclusive rewards.",imageUrl:"https://picsum.photos/300/200?random=6",createdAt:new Date("2024-01-10"),author:"admin",type:"whats-new"},{id:7,title:"Seasonal Clearance",description:"Up to 70% off on seasonal items. Limited quantities available.",imageUrl:"https://picsum.photos/300/200?random=7",createdAt:new Date("2024-01-09"),author:"admin",type:"dashboard"}])}openAddDialog(){this.dialogType.set("add"),this.dialogForm.set({title:"",description:"",imageUrl:"",statsIframe:"",type:"dashboard"}),this.editingOfferId.set(null),this.isDialogOpen.set(!0)}openEditDialog(t){this.dialogType.set("edit"),this.dialogForm.set({title:t.title,description:t.description,imageUrl:t.imageUrl,startDate:t.startDate,endDate:t.endDate,statsIframe:t.statsIframe||"",type:t.type}),this.editingOfferId.set(t.id),this.isDialogOpen.set(!0)}closeDialog(){this.isDialogOpen.set(!1),this.editingOfferId.set(null)}saveOffer(t){if(this.dialogType()==="add"){let e=this.authService.getCurrentUser(),i={id:this.generateNextId(),title:t.title,description:t.description,imageUrl:t.imageUrl,createdAt:new Date,startDate:t.startDate,endDate:t.endDate,author:e?.username||"admin",statsIframe:t.statsIframe?.trim()||void 0,type:t.type};this.offers.set([i,...this.offers()])}else{let i=this.offers().map(n=>n.id===this.editingOfferId()?y(x({},n),{title:t.title,description:t.description,imageUrl:t.imageUrl,startDate:t.startDate,endDate:t.endDate,statsIframe:t.statsIframe?.trim()||void 0,type:t.type}):n);this.offers.set(i)}this.closeDialog()}deleteOffer(t){this.offers.set(this.offers().filter(e=>e.id!==t))}onDragStart(t,e){t.dataTransfer&&(t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",e.id.toString()),this.draggedOffer.set(e))}onDragOver(t){t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="move")}onDragEnter(t){t.preventDefault(),t.currentTarget.classList.add("drag-over")}onDragLeave(t){t.currentTarget.classList.remove("drag-over")}onDrop(t,e){t.preventDefault(),t.currentTarget.classList.remove("drag-over");let n=this.draggedOffer();if(!n||n.id===e.id){this.draggedOffer.set(null);return}let l=this.offers(),T=l.findIndex(P=>P.id===n.id),H=l.findIndex(P=>P.id===e.id);if(T!==-1&&H!==-1){let P=[...l],[ae]=P.splice(T,1);P.splice(H,0,ae),this.offers.set(P)}this.draggedOffer.set(null)}onDragEnd(t){this.draggedOffer.set(null),t.currentTarget.classList.remove("drag-over")}showOfferStats(t){this.selectedOfferForStats.set(t),this.isStatsSidebarOpen.set(!0)}closeStatsSidebar(){this.isStatsSidebarOpen.set(!1),this.selectedOfferForStats.set(null)}setActiveTab(t){this.activeTab.set(t)}filteredOffers(){return this.offers().filter(t=>t.type===this.activeTab())}generateNextId(){let t=this.offers();return t.length>0?Math.max(...t.map(e=>e.id))+1:1}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["ib-offers"]],decls:24,vars:9,consts:[[1,"offers-container"],[1,"header"],[1,"header-content"],[1,"add-offer-btn",3,"click"],[1,"icon"],[1,"tabs-container"],[1,"tabs"],[1,"tab-btn",3,"click"],[1,"offers-content"],[1,"empty-state"],[1,"offers-grid"],[3,"isOpen","dialogType","dialogForm"],[3,"offer","isOpen"],[1,"empty-icon"],[1,"empty-title"],[1,"empty-description"],[1,"empty-action-btn",3,"click"],["draggable","true",1,"offer-item",3,"dragging"],["draggable","true",1,"offer-item",3,"dragstart","dragover","dragenter","dragleave","drop","dragend"],[3,"edit","delete","showStats","offer"],[3,"close","save","isOpen","dialogType","dialogForm"],[3,"close","offer","isOpen"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),a(4,"Offers Management"),d(),o(5,"p"),a(6,"Manage offers and their configurations for the offers section."),d()(),o(7,"button",3),p("click",function(){return i.openAddDialog()}),o(8,"span",4),a(9,"+"),d(),a(10," Add content "),d()(),o(11,"div",5)(12,"div",6)(13,"button",7),p("click",function(){return i.setActiveTab("dashboard")}),a(14," Dashboard "),d(),o(15,"button",7),p("click",function(){return i.setActiveTab("offers")}),a(16," Offers "),d(),o(17,"button",7),p("click",function(){return i.setActiveTab("whats-new")}),a(18," What's New "),d()()(),o(19,"div",8),_(20,Ce,9,3,"div",9)(21,Oe,3,0,"div",10),d()(),_(22,ye,1,3,"ib-offer-dialog",11),_(23,Me,1,2,"ib-offer-stats-sidebar",12)),e&2&&(c(13),F("active",i.activeTab()==="dashboard"),c(2),F("active",i.activeTab()==="offers"),c(2),F("active",i.activeTab()==="whats-new"),c(3),b(i.filteredOffers().length===0?20:21),c(2),b(i.isDialogOpen()?22:-1),c(),b(i.isStatsSidebarOpen()&&i.selectedOfferForStats()?23:-1))},dependencies:[L,A,j,q],styles:[".offers-container[_ngcontent-%COMP%]{padding:2rem;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:2rem;display:flex;align-items:center;justify-content:space-between}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--text-primary);margin-bottom:.5rem;font-weight:600}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);margin-bottom:1.5rem}.add-offer-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background:var(--button-primary);color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;transition:background .2s}.add-offer-btn[_ngcontent-%COMP%]:hover{background:var(--button-hover)}.add-offer-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.tabs-container[_ngcontent-%COMP%]{margin-bottom:2rem}.tabs[_ngcontent-%COMP%]{display:flex;justify-content:space-between;background-color:var(--bg-quaternary);padding:4px;border-radius:10px}.tab-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex:1;gap:.5rem;padding:.75rem 1.5rem;background:transparent;border:none;border-radius:6px;color:var(--text-secondary, #6b7280);font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s ease;position:relative}.tab-btn[_ngcontent-%COMP%]:hover{color:var(--text-primary, #111827);background:var(--bg-quaternary)}.tab-btn.active[_ngcontent-%COMP%]{color:var(--text-accent);background:var(--bg-primary);box-shadow:0 1px 3px #1018281a,0 1px 2px #1018280f}.tab-btn[_ngcontent-%COMP%]:focus{outline:0}.offers-content[_ngcontent-%COMP%]{min-height:400px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center;color:var(--text-secondary, #6b7280)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem}.empty-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0 0 .5rem;color:var(--text-primary, #111827)}.empty-description[_ngcontent-%COMP%]{font-size:1rem;margin:0 0 2rem}.empty-action-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--primary-color, #00adee);color:#fff;border:none;border-radius:.5rem;font-weight:600;cursor:pointer;transition:all .2s ease}.empty-action-btn[_ngcontent-%COMP%]:hover{background:var(--primary-hover, #8dcbf8)}.offers-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,350px);gap:1.5rem;padding:1rem 0}.offer-item[_ngcontent-%COMP%]{cursor:grab;transition:transform .2s ease,box-shadow .2s ease}.offer-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.offer-item[_ngcontent-%COMP%]:active{cursor:grabbing}.offer-item.dragging[_ngcontent-%COMP%]{opacity:.5;transform:rotate(5deg);z-index:1000}.offer-item.drag-over[_ngcontent-%COMP%]{border:2px dashed var(--primary-color, #00adee);background:#3b82f60d}@media (max-width: 768px){.offers-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.offers-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}"],changeDetection:0})};export{oe as OffersComponent};
