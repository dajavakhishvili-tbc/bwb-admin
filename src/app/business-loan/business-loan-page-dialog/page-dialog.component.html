@if (isOpen()) {
  <div class="dialog-overlay" (click)="close.emit()">
    <div class="dialog" [class.delete-dialog]="isDeleteDialog()" (click)="$event.stopPropagation()">
      <div class="dialog-header">
        <h2>{{ dialogTitle() }}</h2>
        <button class="close-btn" (click)="close.emit()">×</button>
      </div>
      <div class="dialog-content">
        @if (isDeleteDialog()) {
          <div class="delete-warning">
            <div class="warning-icon">⚠️</div>
            <h3>Are you sure you want to delete this page?</h3>
            <p class="page-title">{{ selectedPageTitle() }}</p>
            <p class="warning-text">
              This action cannot be undone. The page and all its configurations will be permanently removed.
            </p>
          </div>
          
          <div class="dialog-actions">
            <button type="button" class="btn-secondary" (click)="close.emit()">
              Cancel
            </button>
            <button type="button" class="btn-danger" (click)="delete.emit()">
              Delete Page
            </button>
          </div>
        } @else {
          <form (ngSubmit)="save.emit(dialogForm())" #pageForm="ngForm">
            <div class="form-group">
              <label for="title">Page Title</label>
              <input 
                type="text" 
                id="title" 
                name="title"
                [(ngModel)]="dialogForm().title"
                (ngModelChange)="formChange.emit(dialogForm())"
                required
                placeholder="Enter page title"
                class="form-input"
              >
            </div>
            
            <div class="form-group">
              <label for="description">Description</label>
              <textarea 
                id="description" 
                name="description"
                [(ngModel)]="dialogForm().description"
                (ngModelChange)="formChange.emit(dialogForm())"
                required
                placeholder="Enter page description"
                rows="3"
                class="form-textarea"
              ></textarea>
            </div>
            
            <div class="form-group">
              <label for="posthogEvent">PostHog Event Name</label>
              <input 
                type="text" 
                id="posthogEvent" 
                name="posthogEvent"
                [(ngModel)]="dialogForm().posthogEvent"
                (ngModelChange)="formChange.emit(dialogForm())"
                required
                placeholder="e.g., business_loan_conditions_viewed"
                class="form-input"
              >
              <small class="form-hint">Use snake_case format for event names</small>
            </div>
            
            <div class="dialog-actions">
              <button type="button" class="btn-secondary" (click)="close.emit()">
                Cancel
              </button>
              <button type="submit" class="btn-primary" [disabled]="!pageForm.form.valid">
                {{ saveButtonText() }}
              </button>
            </div>
          </form>
        }
      </div>
    </div>
  </div>
} 